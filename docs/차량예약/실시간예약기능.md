# 실시간 예약 기능

## 개요
비회원 대상 렌트카 실시간 예약 시스템 구현
관리자 승인 후 예약 확정되는 워크플로우



## 주요 기능

### 예약 생성
비회원 고객이 차량 예약 신청
필수 정보: 이름, 연락처, 이메일, 대여기간, 시간
선택 정보: 요청사항

### 실시간 캘린더
React Calendar 라이브러리 활용
예약 불가능한 날짜를 빨간색으로 표시
날짜 범위 선택 (시작일~종료일)
3개월 후까지 예약 가능

### 예약 가용성 확인
선택한 날짜에 이미 예약된 차량인지 실시간 체크
중복 예약 방지 로직

### 예약 내역 조회
이메일 주소 기반 예약 조회
비회원도 이메일만으로 예약 상태 확인 가능

## 데이터베이스 구조

### reservations 테이블
```
- id (UUID, Primary Key)
- reservation_number (예약번호)
- vehicle_id (차량 ID)
- customer_id (회원 ID, NULL 가능)
- guest_name (비회원 이름)
- guest_phone (비회원 연락처)  
- guest_email (비회원 이메일)
- start_date (시작일)
- end_date (종료일)
- start_time (픽업 시간)
- end_time (반납 시간)
- pickup_location (픽업 장소)
- return_location (반납 장소)
- status (pending/confirmed/active/completed/cancelled)
- total_amount (총 금액)
- payment_status (pending/paid/refunded)
- notes (요청사항)
- created_at, updated_at
```

## 예약 플로우

### 1. 예약 신청
고객이 차량 선택 후 예약 폼 작성
캘린더에서 대여 기간 선택
가용성 확인 후 예약 신청 접수

### 2. 관리자 검토
예약 신청 상태로 DB 저장
관리자가 예약 승인/거부 결정

### 3. 예약 확정
승인 시 confirmed 상태로 변경
고객에게 확정 알림 (향후 구현 예정)

### 4. 대여 진행
active 상태로 변경 (대여중)
completed 상태로 변경 (반납 완료)

## 주요 컴포넌트

### BookingModal
예약 폼 모달 컴포넌트
좌측: 고객정보 입력, 대여기간 선택
우측: 요금 요약, 예약하기 버튼

### BookingCalendar  
실시간 캘린더 컴포넌트
예약 불가능한 날짜 표시
날짜 범위 선택 기능

### BookingSuccessModal
예약 완료 안내 모달
예약 정보 표시 및 예약서 다운로드

## API 서비스

### bookingService.ts
```typescript
createBooking() - 예약 생성
checkVehicleAvailability() - 가용성 확인  
getCustomerBookings() - 예약 내역 조회
getVehicleBookedDates() - 예약된 날짜 조회
updateBookingStatus() - 예약 상태 변경
```

## 예약 상태 관리

### 상태 종류
- pending: 예약 신청 (고객 신청 완료)
- confirmed: 예약 확정 (관리자 승인)
- active: 대여중 (차량 인수 후)
- completed: 반납 완료
- cancelled: 취소됨

### 결제 상태
- pending: 결제 대기 (관리자 확정 후 결제)
- paid: 결제 완료
- refunded: 환불 완료

## 특징

### 비회원 친화적
회원가입 없이 예약 가능
이메일만으로 예약 내역 조회

### 실시간 반영
예약된 날짜는 즉시 캘린더에 반영
중복 예약 원천 차단

### 관리자 승인 방식
즉시 확정이 아닌 검토 후 승인
안전한 예약 관리

### 모바일 최적화
반응형 디자인으로 모든 기기 지원
터치 친화적 캘린더 인터페이스

## 향후 개선 사항
- 이메일/SMS 자동 알림
- 온라인 결제 시스템 연동
- 예약 변경/취소 기능
- 회원 시스템 연동
